import{D as p}from"./datetime87425.js";import{u as C}from"./attraction87425.js";import{u as M,e as g}from"./helpers87425.js";import{u as F}from"./dashboard87425.js";import{d as S,o as k,l as L,a as R,c as A,i as $,_ as N,r as w,b as i,e as d,g as o,f as c,s as T,F as B,D as U,w as s,h as n,t as u}from"../index87425.js";const z=S({setup(){k(()=>{t.value.date=p.now().setLocale("it").toFormat("MMMM/yyyy").replace(/^\w/,m=>m.toUpperCase()),r()});const t=L({}),a=C(),v=F(),{showLoader:y,hideLoader:h}=M(),V=R(),l=A(()=>a.allAttractions),b=A(()=>v.allDashboards),r=async function(){y(),await a.fetchAllAttractions().then(()=>{h(),e()})},e=async function(){y();let m="",D="";if(t.value.date&&t.value.date.toString().includes("/")){let _=p.fromFormat(t.value.date,"MMMM/yyyy",{locale:"it"});m=_.month+"",D=_.year+""}else m=p.fromJSDate(new Date(t.value.date)).toFormat("M",{locale:"it"}),D=p.fromJSDate(new Date(t.value.date)).toFormat("yyyy",{locale:"it"});const f=new Map;f.set("month",m),f.set("year",D),t.value.attraction_id&&f.set("attraction_id",t.value.attraction_id),await v.fetchAllReveliaDashboard(f).then(()=>{h()}).catch(_=>{h(),g(V,_)})};return $(l,()=>{l.value.unshift({id:"null",name:"Tutte le location"}),t.value.attraction_id=l.value[0].id}),{form:t,attractions:l,dashboards:b,fetchAllReveliaDashboard:e}}});const J={class:"dashboard"},q=o("h1",null,"Dashboard",-1),E={key:0,class:"flex align-items-center"},P={class:"field col-2 flex flex-column"},j=o("label",null,"Data",-1),x={class:"field col-4 flex flex-column"},G=o("label",{for:"location"},"Attrazione",-1),H={key:1},I={class:"flex align-items-center flex-wrap"},K={key:2},O={class:"flex align-items-center flex-wrap"},Q={class:"col-4"},W={class:"col-4"},X={class:"col-4"};function Y(t,a,v,y,h,V){const l=w("Calendar"),b=w("Dropdown"),r=w("Card");return i(),d("div",J,[q,t.form?(i(),d("div",E,[o("div",P,[j,c(l,{modelValue:t.form.date,"onUpdate:modelValue":[a[0]||(a[0]=e=>t.form.date=e),a[1]||(a[1]=e=>t.fetchAllReveliaDashboard())],view:"month",dateFormat:"MM/yy"},null,8,["modelValue"])]),o("div",x,[G,c(b,{modelValue:t.form.attraction_id,"onUpdate:modelValue":a[2]||(a[2]=e=>t.form.attraction_id=e),options:t.attractions,optionLabel:"name",optionValue:"id",placeholder:"",name:"location",onChange:a[3]||(a[3]=e=>t.fetchAllReveliaDashboard())},null,8,["modelValue","options"])])])):T("",!0),t.dashboards&&t.dashboards.revenue_attractions&&t.form.attraction_id=="null"?(i(),d("div",H,[o("div",I,[(i(!0),d(B,null,U(t.dashboards.revenue_attractions,e=>(i(),d("div",{key:e.name,class:"col-4"},[c(r,null,{title:s(()=>[n(u(e.name),1)]),content:s(()=>[n(" € "+u(e.revenue_month),1)]),_:2},1024)]))),128))])])):(i(),d("div",K,[o("div",O,[o("div",Q,[c(r,null,{title:s(()=>[n(" Prenotazioni totali mese ")]),content:s(()=>[n(u(t.dashboards.orders_total_month||"0"),1)]),_:1})]),o("div",W,[c(r,null,{title:s(()=>[n(" Visitatori totali mese ")]),content:s(()=>[n(u(t.dashboards.quantity_total_month||"0"),1)]),_:1})]),o("div",X,[c(r,null,{title:s(()=>[n(" Fatturato totale mese ")]),content:s(()=>[n(" € "+u(t.dashboards.total_month||"0"),1)]),_:1})])])]))])}const st=N(z,[["render",Y]]);export{st as default};
