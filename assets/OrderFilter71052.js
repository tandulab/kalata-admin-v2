import{u as G}from"./location71052.js";import{D as T}from"./datetime71052.js";import{u as B}from"./order71052.js";import{u as N}from"./attraction71052.js";import{u as O}from"./guide71052.js";import{o as R,l as k,c as f,i as C,_ as q,r as m,b as u,s as L,w as _,f as s,g as a,e as p,q as V,h as M,t as y}from"../index71052.js";const j={props:["revelia"],setup(x,l){R(()=>{c()});const t=k({}),e=G(),b=N(),g=B(),d=O(),v=k([{name:"In attesa di conferma",value:"added"},{name:"Confermato",value:"confirmed"},{name:"Non Confermato",value:"canceled"}]),i=f(()=>e.allLocations),n=f(()=>b.allAttractions),A=f(()=>g.paymentStatus),h=f(()=>g.paymentStatusRevelia),o=f(()=>d.responseGuides),c=function(){x.revelia?(!n.value||n.value.length==0?U():(t.value.attraction=n.value[0],r()),w()):i.value?(t.value.location=i.value[0],r()):I()},r=function(){const S=T.local(),D=S.minus({months:1}).startOf("month");t.value.date_from=D.toFormat("dd/LL/yyyy"),t.value.date_to=S.toFormat("dd/LL/yyyy"),t.value.status=null,t.value.code="",t.value.user="",t.value.name="",t.value.guide=null,t.value.guide_id=null,t.value.attraction_id=null,t.value.event_status=null,l.emit("onSubmit",t.value)},F=function(){c()},I=async function(){await e.fetchAllLocations()},U=async function(){await b.fetchAllAttractions()},w=async function(){await d.fetchAllGuides()};return C(i,()=>{t.value.location_id=i.value[0].id,t.value.location=i.value[0],r()}),C(n,()=>{t.value.attraction_id=n.value[0].id,t.value.attraction=n.value[0],r()}),{form:t,event_statuses:v,locations:i,attractions:n,statuses:A,statusesRevelia:h,responseGuides:o,resetForm:F}}},z={class:"formgrid grid px-0 align-items-center"},E={class:"field col-3 flex flex-column"},H=a("label",{for:"typology"},"Location",-1),J={class:"field col-2"},K=a("label",{from:"date_from"},"Dal",-1),Q={class:"field col-2"},W=a("label",{from:"date_to"},"Al",-1),X={key:0,class:"field col-3 flex flex-column"},Y=a("label",{from:"status"},"Codice prenotazione",-1),Z={key:1,class:"field col-3 flex flex-column"},P=a("label",{from:"status"},"Acquirente",-1),$={key:2,class:"field col-2 flex flex-column"},ee=a("label",{from:"guide"},"Guida",-1),oe={class:"flex align-items-center"},te={class:"field col-2 flex flex-column"},le=a("label",{from:"status"},"Stato pagamento",-1),ae={key:3,class:"field col-2 flex flex-column"},ne=a("label",{from:"event_status"},"Stato evento",-1),se={class:"flex col-12 justify-content-end pt-1"};function ie(x,l,t,e,b,g){const d=m("Dropdown"),v=m("Calendar"),i=m("InputText"),n=m("Button"),A=m("AccordionTab"),h=m("Accordion");return u(),L(h,{activeIndex:0},{default:_(()=>[s(A,{header:"FILTRI"},{default:_(()=>[a("div",z,[a("div",E,[H,t.revelia?(u(),L(d,{key:1,modelValue:e.form.attraction,"onUpdate:modelValue":l[1]||(l[1]=o=>e.form.attraction=o),options:e.attractions,optionLabel:"name"},null,8,["modelValue","options"])):(u(),L(d,{key:0,modelValue:e.form.location,"onUpdate:modelValue":l[0]||(l[0]=o=>e.form.location=o),options:e.locations,optionLabel:"name"},null,8,["modelValue","options"]))]),a("div",J,[K,s(v,{inputId:"date_from",modelValue:e.form.date_from,"onUpdate:modelValue":l[2]||(l[2]=o=>e.form.date_from=o),dateFormat:"dd/mm/yy",manualInput:!1,placeholder:""},null,8,["modelValue"])]),a("div",Q,[W,s(v,{inputId:"date_to",modelValue:e.form.date_to,"onUpdate:modelValue":l[3]||(l[3]=o=>e.form.date_to=o),dateFormat:"dd/mm/yy",manualInput:!1,placeholder:""},null,8,["modelValue"])]),t.revelia?V("",!0):(u(),p("div",X,[Y,s(i,{type:"text",modelValue:e.form.code,"onUpdate:modelValue":l[4]||(l[4]=o=>e.form.code=o)},null,8,["modelValue"])])),t.revelia?V("",!0):(u(),p("div",Z,[P,s(i,{type:"text",modelValue:e.form.name,"onUpdate:modelValue":l[5]||(l[5]=o=>e.form.name=o)},null,8,["modelValue"])])),t.revelia?(u(),p("div",$,[ee,s(d,{id:"guide",modelValue:e.form.guide,"onUpdate:modelValue":l[6]||(l[6]=o=>e.form.guide=o),options:e.responseGuides.guides},{value:_(o=>{var c,r;return[M(y((c=o.value)==null?void 0:c.first_name)+" "+y((r=o.value)==null?void 0:r.last_name),1)]}),option:_(o=>[a("div",oe,[a("div",null,y(o.option.first_name)+" "+y(o.option.last_name),1)])]),_:1},8,["modelValue","options"])])):V("",!0),a("div",te,[le,s(d,{id:"status",modelValue:e.form.status,"onUpdate:modelValue":l[7]||(l[7]=o=>e.form.status=o),options:t.revelia?e.statusesRevelia:e.statuses,optionLabel:"name",optionValue:"id",placeholder:""},null,8,["modelValue","options"])]),t.revelia?(u(),p("div",ae,[ne,s(d,{id:"event_status",modelValue:e.form.event_status,"onUpdate:modelValue":l[8]||(l[8]=o=>e.form.event_status=o),options:e.event_statuses,optionLabel:"name",optionValue:"value"},null,8,["modelValue","options"])])):V("",!0)]),a("div",se,[s(n,{label:"Ricerca",class:"mr-2",onClick:l[9]||(l[9]=o=>x.$emit("onSubmit",e.form))}),s(n,{label:"Annulla",class:"p-button-outlined",onClick:l[10]||(l[10]=o=>e.resetForm())})])]),_:1})]),_:1})}const ve=q(j,[["render",ie]]);export{ve as O};
