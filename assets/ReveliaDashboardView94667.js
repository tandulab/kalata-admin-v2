import{D as A}from"./datetime94667.js";import{u as M}from"./attraction94667.js";import{u as g,e as R}from"./helpers94667.js";import{l as C,m as k,d as S,o as F,p as L,a as T,c as V,i as $,_ as N,r as y,b as d,e as i,g as o,f as c,y as B,F as U,T as z,w as s,h as n,t as m}from"../index94667.js";class q{static async fetchAllReveliaDashboard(e){return(await C("/admin/dashboards",e)).data}static async fetchAllDashboard(e){return(await C("/admin/dashboards",e)).data}}const x=k({id:"dashboard",state:()=>({dashboard:{},dashboards:[],response_dashboards:{}}),getters:{allDashboards:a=>a.dashboard,responseDashboards:a=>a.response_dashboards,getCurrentDashboard:a=>a.dashboard},actions:{async fetchAllReveliaDashboard(a){await q.fetchAllReveliaDashboard(a).then(e=>{this.response_dashboards=e,this.dashboard=this.response_dashboards.dashboard})}}}),E=S({setup(){F(()=>{a.value.date=A.now().setLocale("it").toFormat("MMMM/yyyy").replace(/^\w/,_=>_.toUpperCase()),l()});const a=L({}),e=M(),h=x(),{showLoader:b,hideLoader:u}=g(),D=T(),r=V(()=>e.allAttractions),v=V(()=>h.allDashboards),l=async function(){b(),await e.fetchAllAttractions().then(()=>{u(),t()})},t=async function(){b();let _="",w="";if(a.value.date.includes("/")){let f=A.fromFormat(a.value.date,"MMMM/yyyy",{locale:"it"});_=f.month+"",w=f.year+""}const p=new Map;p.set("month",_),p.set("year",w),a.value.attraction_id&&p.set("attraction_id",a.value.attraction_id),await h.fetchAllReveliaDashboard(p).then(()=>{u()}).catch(f=>{u(),R(D,f)})};return $(r,()=>{r.value.unshift({id:"null",name:"Tutte le location"}),a.value.attraction_id=r.value[0].id}),{form:a,attractions:r,dashboards:v,fetchAllReveliaDashboard:t}}});const G={class:"dashboard"},P=o("h1",null,"Dashboard",-1),j={key:0,class:"flex align-items-center"},H={class:"field col-2 flex flex-column"},I=o("label",null,"Data",-1),J={class:"field col-4 flex flex-column"},K=o("label",{for:"location"},"Attrazione",-1),O={key:1},Q={class:"flex align-items-center flex-wrap"},W={key:2},X={class:"flex align-items-center flex-wrap"},Y={class:"col-4"},Z={class:"col-4"},aa={class:"col-4"};function ea(a,e,h,b,u,D){const r=y("Calendar"),v=y("Dropdown"),l=y("Card");return d(),i("div",G,[P,a.form?(d(),i("div",j,[o("div",H,[I,c(r,{modelValue:a.form.date,"onUpdate:modelValue":e[0]||(e[0]=t=>a.form.date=t),view:"month",dateFormat:"MM/yy"},null,8,["modelValue"])]),o("div",J,[K,c(v,{modelValue:a.form.attraction_id,"onUpdate:modelValue":e[1]||(e[1]=t=>a.form.attraction_id=t),options:a.attractions,optionLabel:"name",optionValue:"id",placeholder:"",name:"location",onChange:e[2]||(e[2]=t=>a.fetchAllReveliaDashboard())},null,8,["modelValue","options"])])])):B("",!0),a.dashboards&&a.dashboards.revenue_attractions&&a.form.attraction_id=="null"?(d(),i("div",O,[o("div",Q,[(d(!0),i(U,null,z(a.dashboards.revenue_attractions,t=>(d(),i("div",{key:t.name,class:"col-4"},[c(l,null,{title:s(()=>[n(m(t.name),1)]),content:s(()=>[n(" € "+m(t.revenue_month),1)]),_:2},1024)]))),128))])])):(d(),i("div",W,[o("div",X,[o("div",Y,[c(l,null,{title:s(()=>[n(" Prenotazioni totali mese ")]),content:s(()=>[n(m(a.dashboards.orders_total_month||"-"),1)]),_:1})]),o("div",Z,[c(l,null,{title:s(()=>[n(" Visitatori totali mese ")]),content:s(()=>[n(m(a.dashboards.quantity_total_month||"-"),1)]),_:1})]),o("div",aa,[c(l,null,{title:s(()=>[n(" Fatturato totale mese ")]),content:s(()=>[n(" € "+m(a.dashboards.total_month||"-"),1)]),_:1})])])]))])}const ra=N(E,[["render",ea]]);export{ra as default};
