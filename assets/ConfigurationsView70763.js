import{u as ye}from"./location70763.js";import{u as ee,e as A,s as R}from"./helpers70763.js";import{y as W,A as se,C as le,z as ce,B as re,o as H,l as w,a as G,c as U,i as L,_ as K,r as _,p as X,b as B,v as Z,w as v,g as s,f as a,e as z,s as $,h as F,t as N,q as P,x as me,F as q,D as ie}from"../index70763.js";import{c as _e,a as fe}from"./index.esm70763.js";import{F as ge}from"./vee-validate.esm70763.js";import{I as pe}from"./InputTextWithValidation70763.js";import{u as ve}from"./category70763.js";import{e as ue,g as oe,a as Y,b as ae,h as be}from"./formatData70763.js";import{D as Ce}from"./datetime70763.js";import"./attraction70763.js";import"./_commonjsHelpers70763.js";/* empty css                                                                            */class te{static async fetchAll(e){return(await W(`/admin/locations/${e}/courses`)).data}static async addCourse(e){return(await se(`/admin/locations/${e.location_id}/courses`,e)).data.course}static async updateCourse(e){return(await le(`/admin/locations/${e.location_id}/courses/${e.course.id}`,e)).data.course}static async deleteCourse(e){return await ce(`/admin/courses/${e}`)}}const ke=re({id:"course",state:()=>({course:{},courses:[],response_courses:{}}),getters:{allCourses:t=>t.courses,responseCourses:t=>t.response_courses,getTotalCourses:t=>t.response_courses?t.response_courses.total:0,getCurrentCourse:t=>t.course},actions:{async fetchAllCourses(t){await te.fetchAll(t).then(e=>{this.response_courses=e,this.courses=e.courses})},async addCourse(t){await te.addCourse(t).then(e=>{this.course=e})},async updateCourse(t){await te.updateCourse(t).then(e=>{this.course=e})},async deleteCourse(t){await te.deleteCourse(t).then()}}});class ne{static async fetchAll(e){return(await W(`/admin/courses/${e}/tickets`)).data}static async addTicket(e){return await se(`/admin/courses/${e.course_id}/tickets`,e)}static async updateTicket(e){return await le(`/admin/courses/${e.course_id}/tickets/${e.ticket.id}`,e)}static async deleteTicket(e){return await ce(`/admin/courses/${e.course_id}/tickets/${e.ticket_id}`)}}const we=re({id:"ticket",state:()=>({ticket:{},tickets:[],response_tickets:{}}),getters:{allTickets:t=>t.tickets,responseTickets:t=>t.response_tickets,getTotalTickets:t=>t.response_tickets?t.response_tickets.total:0,getCurrentTicket:t=>t.ticket},actions:{async fetchAllTickets(t){await ne.fetchAll(t).then(e=>{this.response_tickets=e,this.tickets=e.tickets})},async addTicket(t){await ne.addTicket(t).then()},async updateTicket(t){await ne.updateTicket(t).then()},async deleteTicket(t){await ne.deleteTicket(t).then()}}}),xe={props:["course","location_id"],setup(t,e){H(()=>{t.course&&t.course.id&&(n.value=Object.assign({},t.course),i()),n.value.tickets=[]});const n=w({}),o=w([]),T=_e({name:fe().required("Nome percorso obbligatorio")}),{showLoader:D,hideLoader:c}=ee(),r=G(),b=ke(),y=ve(),f=we(),C=w(!1),k=U(()=>b.allCourses),l=U(()=>y.allCategories),h=U(()=>f.responseTickets),d=U(()=>b.getCurrentCourse),g=function(){D();const S={course:Object.assign({},n.value),location_id:t.location_id};b.addCourse(S).then(()=>{c(),R(r,{message:"Percorso aggiunto correttamente",error:!1}),e.emit("onSubmit")}).catch(j=>{c(),A(r,j)})},i=async function(){let m=t.course.id?t.course.id:d.value.id;D(),await f.fetchAllTickets(m).then(()=>{c()}).catch(S=>{c(),A(r,S)})},V=function(){D();const S={course:Object.assign({},n.value),location_id:t.location_id};b.updateCourse(S).then(()=>{c(),R(r,{message:"Percorso modificato correttamente",error:!1}),e.emit("onSubmit")}).catch(j=>{c(),A(r,j)})},E=function(){n.value.id?V():g()},O=function(){let m={name:"",description:"",price:0};n.value.tickets.push(m),o.value.push(m)},I=function(m,S){m.id?M(m):n.value.tickets.splice(S,1)},M=async function(m){const S={course_id:t.course.id?t.course.id:d.value.id,ticket_id:m.id};D(),await f.deleteTicket(S).then(()=>{c(),R(r,{message:"Biglietto eliminato correttamente",error:!1}),i()}).catch(j=>{c(),A(r,j)})},x=function(m){let{newData:S,index:j}=m;n.value.tickets[j]=S,S.id?u(S):p(S)},p=async function(m){const S={course_id:t.course.id?t.course.id:d.value.id,ticket:m};await f.addTicket(S).then(()=>{c(),R(r,{message:"Biglietto aggiunto correttamente",error:!1}),i()}).catch(j=>{c(),A(r,j)})},u=async function(m){const S={course_id:t.course.id?t.course.id:d.value.id,ticket:m};await f.updateTicket(S).then(()=>{c(),R(r,{message:"Biglietto aggiornato correttamente",error:!1}),i()}).catch(j=>{c(),A(r,j)})};return L(l,()=>{n.value.category||(n.value.category=l.value[0])}),L(h,()=>{h.value&&h.value.tickets.length>0&&(n.value.tickets=Object.assign([],h.value.tickets))}),L(d,()=>{n.value=Object.assign({},d.value)}),{form:n,schema:T,loading:C,editingRows:o,response_tickets:h,onSubmit:E,addTicket:O,onDeleteTicket:I,onRowEditSave:x,updateTicketsApi:u,courses:k,categories:l}},components:{Form:ge,InputTextWithValidation:pe}},Ve={class:"formgrid grid mt-3"},De={class:"field col-12"},Te={class:"field col-12"},Se=s("label",{for:"description"},"Descrizione",-1),Ee={key:0,class:"flex justify-content-end mt-4 mb-3"},Ae={class:"w-full"},Be={class:"flex justify-content-center"},Ue={class:"flex align-items-center justify-content-end mt-6"};function Ie(t,e,n,o,T,D){const c=_("InputTextWithValidation"),r=_("Textarea"),b=_("Button"),y=_("InputText"),f=_("Column"),C=_("InputSwitch"),k=_("DataTable"),l=_("Form"),h=X("tooltip");return B(),Z(l,{onSubmit:o.onSubmit,"validation-schema":o.schema},{default:v(()=>[s("div",Ve,[s("div",De,[a(c,{name:"name",label:"Nome percorso*",modelValue:o.form.name,"onUpdate:modelValue":e[0]||(e[0]=d=>o.form.name=d)},null,8,["modelValue"])]),s("div",Te,[Se,a(r,{rows:"5",cols:"30",name:"description",label:"Nome percorso*",modelValue:o.form.description,"onUpdate:modelValue":e[1]||(e[1]=d=>o.form.description=d),class:"w-full"},null,8,["modelValue"])])]),o.form.id?(B(),z("div",Ee,[a(b,{label:"Tipologia biglietto",icon:"pi pi-plus",rounded:"",outlined:"",onClick:e[2]||(e[2]=d=>o.addTicket())})])):$("",!0),o.form.id?(B(),Z(k,{key:1,value:o.form.tickets,ref:"dt",loading:o.loading,stripedRows:"",editingRows:o.editingRows,"onUpdate:editingRows":e[3]||(e[3]=d=>o.editingRows=d),editMode:"row",dataKey:"id",onRowEditSave:o.onRowEditSave},{empty:v(()=>[F(" Nessun biglietto trovato. ")]),default:v(()=>[a(f,{header:"Tipo biglietto",field:"name",style:{"min-width":"150px"}},{editor:v(({data:d,field:g})=>[a(y,{modelValue:d[g],"onUpdate:modelValue":i=>d[g]=i},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(f,{header:"Descrizione",field:"description"},{editor:v(({data:d,field:g})=>[s("div",Ae,[a(r,{modelValue:d[g],"onUpdate:modelValue":i=>d[g]=i,class:"w-full"},null,8,["modelValue","onUpdate:modelValue"])])]),_:1}),a(f,{header:"Prezzo",field:"price",bodyStyle:"min-width: 6rem"},{body:v(({data:d})=>[F(" € "+N((+d.price).toFixed(2)),1)]),editor:v(({data:d,field:g})=>[a(y,{modelValue:d[g],"onUpdate:modelValue":i=>d[g]=i},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(f,{header:"Stato",field:"public",bodyStyle:"min-width: 6rem"},{body:v(({data:d,field:g})=>[a(C,{modelValue:d[g],"onUpdate:modelValue":i=>d[g]=i,onChange:i=>o.updateTicketsApi(d)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),editor:v(({data:d,field:g})=>[a(C,{modelValue:d[g],"onUpdate:modelValue":i=>d[g]=i},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(f,{rowEditor:!0,bodyStyle:"text-align:center; padding-right:0;min-width: 6rem"}),a(f,{header:"",style:{width:"3rem","padding-left":"0"}},{body:v(({data:d,index:g})=>[s("div",Be,[P(a(b,{link:"",icon:"pi pi-trash",text:"",rounded:"",style:{color:"var(--surface-400)"},onClick:i=>o.onDeleteTicket(d,g)},null,8,["onClick"]),[[h,"Elimina",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading","editingRows","onRowEditSave"])):$("",!0),s("div",Ue,[a(b,{label:"Annulla",text:"",onClick:e[4]||(e[4]=d=>t.$emit("onClose"))}),a(b,{label:"Conferma",type:"submit"})])]),_:1},8,["onSubmit","validation-schema"])}const je=K(xe,[["render",Ie]]),ze={props:["location_id"],setup(t){H(()=>{D.value=!0,c.value={first:0,rows:n.value.rows,sortField:null,sortOrder:null},c.value.page=0,h()});const e=G(),n=w(),o=w(),T=w(),D=w(!0),c=w(),r=w(0),b=w(!1),{showLoader:y,hideLoader:f}=ee(),C=ke(),k=U(()=>C.responseCourses),l=me();U(()=>l.submitDialog);function h(){y(),setTimeout(()=>{d()},Math.random()*1e3+250)}const d=async function(){D.value=!0,await C.fetchAllCourses(t.location_id).then(()=>{D.value=!1,f()}).catch(I=>{D.value=!1,f(),A(e,I)})},g=function(I){T.value=I,b.value=!0},i=function(I){T.value=I;let M="Sei sicuro di voler archiviare questo percorso?";l.setDialog("Archivia percorso","Archivia","Annulla",M),l.setBtnSubmit(!1),l.setDynamicDialogVisibility(!0)},V=function(I){y();const M={course:I,location_id:t.location_id};C.updateCourse(M).then(()=>{f(),R(e,{message:"Percorso modificato correttamente",error:!1}),d()}).catch(x=>{f(),A(e,x)})},E=function(){return T.value&&T.value.id?"Modifica percorso":"Aggiungi percorso"},O=function(){};return L(t,()=>{t.location_id&&d()}),{dt:n,responseCourses:k,loading:D,totalRecords:r,lazyParams:c,op:o,visible:b,currentCourse:T,loadLazyData:h,onEditCourse:g,closeDialog:O,getHeader:E,updateCourse:V,onArchiveCourse:i}},components:{CourseDialog:je}},Me={class:"flex justify-content-end mt-4 mb-3"},Re={class:"flex justify-content-center"};function Le(t,e,n,o,T,D){const c=_("Button"),r=_("Column"),b=_("InputSwitch"),y=_("DataTable"),f=_("CourseDialog"),C=_("Dialog"),k=X("tooltip");return B(),z(q,null,[s("div",Me,[a(c,{label:"Percorso",icon:"pi pi-plus",rounded:"",outlined:"",onClick:e[0]||(e[0]=l=>o.onEditCourse({}))})]),a(y,{value:o.responseCourses.courses,lazy:!0,paginator:!1,ref:"dt",loading:o.loading,stripedRows:""},{empty:v(()=>[F(" Nessun percorso trovato. ")]),default:v(()=>[a(r,{header:"Nome",field:"name"}),a(r,{header:"Tipologie biglietti"},{body:v(({data:l})=>[(B(!0),z(q,null,ie(l.tickets,h=>(B(),z("div",{key:h.id},N(h.name),1))),128))]),_:1}),a(r,{header:"Prezzo"},{body:v(({data:l})=>[(B(!0),z(q,null,ie(l.tickets,h=>(B(),z("div",{key:h.id}," € "+N((+h.price).toFixed(2)),1))),128))]),_:1}),a(r,{header:"Stato"},{body:v(({data:l})=>[a(b,{modelValue:l.public,"onUpdate:modelValue":h=>l.public=h,onChange:h=>o.updateCourse(l)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),a(r,{header:""},{body:v(({data:l})=>[s("div",Re,[P(a(c,{link:"",icon:"pi pi-pencil",text:"",rounded:"",style:{color:"var(--surface-400)"},onClick:h=>o.onEditCourse(l),class:"mr-2"},null,8,["onClick"]),[[k,"Modifica",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading"]),a(C,{visible:o.visible,"onUpdate:visible":e[3]||(e[3]=l=>o.visible=l),modal:"",header:o.getHeader(),style:{width:"70rem"}},{default:v(()=>[a(f,{course:o.currentCourse,location_id:n.location_id,onOnSubmit:e[1]||(e[1]=l=>o.closeDialog()),onOnClose:e[2]||(e[2]=l=>o.visible=!1)},null,8,["course","location_id"])]),_:1},8,["visible","header"])],64)}const Ne=K(ze,[["render",Le]]);class J{static async fetchAll(e){return e?(await W("/admin/booking_rules",e)).data:{}}static async getCourses(e){return(await W("/admin/booking_rules/courses",e)).data}static async getTickets(e){return(await W("/admin/booking_rules/tickets",e)).data}static async addConfiguration(e){return await se("/admin/booking_rules",e)}static async updateConfiguration(e){return await le(`/admin/booking_rules/${e.booking_rule.id}`,e)}static async deleteConfiguration(e){return e==null?{}:await ce(`/admin/booking_rules/${e}`)}}const de=re({id:"configuration",state:()=>({configuration:{},configurations:[],response_configurations:{},response_courses:{},response_tickets:{}}),getters:{allConfigurations:t=>t.configurations,responseConfigurations:t=>t.response_configurations,getTotalConfigurations:t=>t.response_configurations?t.response_configurations.total:0,getCurrentConfiguration:t=>t.configuration,responseCourses:t=>t.response_courses,responseTickets:t=>t.response_tickets},actions:{async fetchAllConfigurations(t){await J.fetchAll(t).then(e=>{this.response_configurations=e,this.configurations=e.configurations})},async getAllCourses(t){await J.getCourses(t).then(e=>{this.response_courses=e})},async getAllTickets(t){await J.getTickets(t).then(e=>{this.response_tickets=e})},async addConfiguration(t){await J.addConfiguration(t).then()},async updateConfiguration(t){await J.updateConfiguration(t).then()},async deleteConfiguration(t){t!=null&&await J.deleteConfiguration(t).then()}}}),Oe={props:["config","location_id","course_id","duplicate"],setup(t,e){H(()=>{t.config&&t.config.id?(n.value=Object.assign({},t.config),n.value.from_date&&(n.value.from_date=ue(n.value.from_date)),n.value.to_date&&(n.value.to_date=ue(n.value.to_date)),t.duplicate&&delete n.value.id):(n.value.location_id=t.location_id,n.value.course_id=t.course_id,n.value.booking_rule_slots=[]),x()});const n=w({}),o=w([]),T=w(!1),D=_e({name_config:fe().required("Nome configurazione obbligatoria")}),{showLoader:c,hideLoader:r}=ee(),b=G(),y=ve(),f=w(!1),C=de(),k=U(()=>y.allCategories),l=U(()=>C.responseTickets),h=U(()=>C.responseCourses),d=function(){c();const p=Object.assign({},n.value);p.from_date&&(p.from_date=oe(p.from_date)),p.to_date&&(p.to_date=oe(p.to_date)),p.booking_rule_slots=[],n.value.booking_rule_slots&&n.value.booking_rule_slots.forEach(m=>{m.available_seats!=""&&m.start_at!=""&&p.booking_rule_slots.push(m)});const u={booking_rule:p};C.addConfiguration(u).then(()=>{r(),R(b,{message:"Configurazione aggiunta correttamente",error:!1}),e.emit("onSubmit",n.value.course_id)}).catch(m=>{r(),A(b,m)})},g=function(){c();const p=Object.assign({},n.value);p.from_date&&(p.from_date=oe(p.from_date)),p.to_date&&(p.to_date=oe(p.to_date)),p.booking_rule_slots=[],n.value.booking_rule_slots&&n.value.booking_rule_slots.forEach(m=>{m.available_seats!=""&&m.start_at!=""&&p.booking_rule_slots.push(m)});const u={booking_rule:p};C.updateConfiguration(u).then(()=>{r(),R(b,{message:"Configurazione modificata correttamente",error:!1}),e.emit("onSubmit",n.value.course_id)}).catch(m=>{r(),A(b,m)})},i=function(){n.value.id?g():d()},V=function(){let p={};p.price=0,n.value.tickets.unshift(p),o.value.push(n.value.tickets[0])},E=function(p){let{newData:u,index:m}=p;n.value.booking_rule_slots[m]=u;let j={start_at:"",available_seats:"",id:+n.value.booking_rule_slots[n.value.booking_rule_slots.length-1].id-1};n.value.booking_rule_slots.push(j),o.value=[j]},O=function(){let p={start_at:"",available_seats:"",id:"-1"};n.value.booking_rule_slots.push(p),o.value.push(p)},I=function(p,u){n.value.booking_rule_slots.splice(u,1)},M=function(p){p?n.value.wdays=[0,1,2,3,4,5,6]:n.value.wdays=[]},x=function(){const p=new Map;p.set("location_id",n.value.location_id),p.set("course_id",n.value.course_id),C.getAllTickets(p).catch(u=>{A(b,u)})};return L(k,()=>{n.value.category||(n.value.category=k.value[0])}),{form:n,schema:D,loading:f,editingRows:o,check_all:T,onSubmit:i,addTicket:V,onRowEditSave:E,checkAll:M,deleteSlot:I,addSlot:O,fetchAllTickets:x,categories:k,responseCourses:h,responseTickets:l}},components:{Form:ge,InputTextWithValidation:pe}};const Fe={class:"formgrid grid mt-3"},Pe={class:"field col-12"},We={class:"field flex flex-column col-6"},qe=s("label",{for:"location"},"Percorso",-1),He={class:"field col-3"},Ge=s("label",{from:"date_from"},"Dal",-1),Ke={class:"field col-3"},Je=s("label",{from:"date_to"},"Al",-1),Qe={class:"field col-12 mt-3"},Xe=s("label",null,"Giorni",-1),Ye={class:"card flex flex-wrap gap-3 mt-2"},Ze={class:"flex align-items-center mr-4"},$e=s("label",{for:"all",class:"ml-2"}," Tutti i giorni ",-1),eo={class:"flex align-items-center"},oo=s("label",{for:"lun",class:"ml-2"}," Lun ",-1),to={class:"flex align-items-center"},no=s("label",{for:"mar",class:"ml-2"}," Mar ",-1),io={class:"flex align-items-center"},ao=s("label",{for:"mer",class:"ml-2"}," Mer ",-1),so={class:"flex align-items-center"},lo=s("label",{for:"gio",class:"ml-2"}," Gio ",-1),co={class:"flex align-items-center"},ro=s("label",{for:"ven",class:"ml-2"}," Ven ",-1),uo={class:"flex align-items-center"},mo=s("label",{for:"sab",class:"ml-2"}," Sab ",-1),_o={class:"flex align-items-center"},fo=s("label",{for:"dom",class:"ml-2"}," Dom ",-1),go={class:"field col-3 mt-3"},po=s("label",null,"Biglietti",-1),vo={for:"ticket.id",class:"ml-2 flex align-items-center"},bo={class:"inline-block",style:{"min-width":"150px"}},ko={class:"text-right"},ho=s("div",{class:"col-9"},null,-1),yo={class:"col-8 mt-3"},Co={class:"field flex justify-content-between align-items-end mt-4 mb-3"},wo=s("label",null,"Orari",-1),xo={class:"flex justify-content-center"},Vo={class:"flex align-items-center justify-content-end mt-6"};function Do(t,e,n,o,T,D){const c=_("InputTextWithValidation"),r=_("Dropdown"),b=_("Calendar"),y=_("Checkbox"),f=_("Button"),C=_("InputMask"),k=_("Column"),l=_("InputNumber"),h=_("DataTable"),d=_("Form"),g=X("tooltip");return B(),Z(d,{onSubmit:o.onSubmit,"validation-schema":o.schema},{default:v(()=>[s("div",Fe,[s("div",Pe,[a(c,{name:"name_config",label:"Nome configurazione*",modelValue:o.form.name,"onUpdate:modelValue":e[0]||(e[0]=i=>o.form.name=i),id:"name_config",type:"text"},null,8,["modelValue"])]),s("div",We,[qe,a(r,{modelValue:o.form.course_id,"onUpdate:modelValue":e[1]||(e[1]=i=>o.form.course_id=i),options:o.responseCourses.courses,optionLabel:"name",optionValue:"id",placeholder:"",name:"location",onChange:e[2]||(e[2]=i=>o.fetchAllTickets())},null,8,["modelValue","options"])]),s("div",He,[Ge,a(b,{inputId:"date_from",modelValue:o.form.from_date,"onUpdate:modelValue":e[3]||(e[3]=i=>o.form.from_date=i),dateFormat:"dd/mm",placeholder:"dd/mm",panelClass:"hide-year"},null,8,["modelValue"])]),s("div",Ke,[Je,a(b,{inputId:"date_to",modelValue:o.form.to_date,"onUpdate:modelValue":e[4]||(e[4]=i=>o.form.to_date=i),dateFormat:"dd/mm",placeholder:"dd/mm",panelClass:"hide-year"},null,8,["modelValue"])]),s("div",Qe,[Xe,s("div",Ye,[s("div",Ze,[a(y,{modelValue:o.check_all,"onUpdate:modelValue":[e[5]||(e[5]=i=>o.check_all=i),e[6]||(e[6]=i=>o.checkAll(i))],inputId:"all",name:"week",binary:!0},null,8,["modelValue"]),$e]),s("div",eo,[a(y,{modelValue:o.form.wdays,"onUpdate:modelValue":e[7]||(e[7]=i=>o.form.wdays=i),inputId:"lun",name:"week",value:1},null,8,["modelValue"]),oo]),s("div",to,[a(y,{modelValue:o.form.wdays,"onUpdate:modelValue":e[8]||(e[8]=i=>o.form.wdays=i),inputId:"mar",name:"week",value:2},null,8,["modelValue"]),no]),s("div",io,[a(y,{modelValue:o.form.wdays,"onUpdate:modelValue":e[9]||(e[9]=i=>o.form.wdays=i),inputId:"mer",name:"week",value:3},null,8,["modelValue"]),ao]),s("div",so,[a(y,{modelValue:o.form.wdays,"onUpdate:modelValue":e[10]||(e[10]=i=>o.form.wdays=i),inputId:"gio",name:"week",value:4},null,8,["modelValue"]),lo]),s("div",co,[a(y,{modelValue:o.form.wdays,"onUpdate:modelValue":e[11]||(e[11]=i=>o.form.wdays=i),inputId:"ven",name:"week",value:5},null,8,["modelValue"]),ro]),s("div",uo,[a(y,{modelValue:o.form.wdays,"onUpdate:modelValue":e[12]||(e[12]=i=>o.form.wdays=i),inputId:"sab",name:"week",value:6},null,8,["modelValue"]),mo]),s("div",_o,[a(y,{modelValue:o.form.wdays,"onUpdate:modelValue":e[13]||(e[13]=i=>o.form.wdays=i),inputId:"dom",name:"week",value:0},null,8,["modelValue"]),fo])])]),s("div",go,[po,(B(!0),z(q,null,ie(o.responseTickets.tickets,i=>(B(),z("div",{key:i.id,class:"flex align-items-center mb-2 mt-2"},[a(y,{modelValue:o.form.booking_rule_ticket_ids,"onUpdate:modelValue":e[14]||(e[14]=V=>o.form.booking_rule_ticket_ids=V),inputId:"ticket.id",name:"category",value:i.id},null,8,["modelValue","value"]),s("label",vo,[s("div",bo,N(i.name),1),s("div",ko,"€ "+N(i.price),1)])]))),128))]),ho,s("div",yo,[s("div",Co,[wo,a(f,{label:"Slot orario",icon:"pi pi-plus",rounded:"",outlined:"",onClick:e[15]||(e[15]=i=>o.addSlot())})]),a(h,{value:o.form.booking_rule_slots,stripedRows:"",editingRows:o.editingRows,"onUpdate:editingRows":e[16]||(e[16]=i=>o.editingRows=i),editMode:"row",dataKey:"id",onRowEditSave:o.onRowEditSave},{empty:v(()=>[F(" Nessuno slot orario trovato. ")]),default:v(()=>[a(k,{header:"Ora",field:"start_at"},{editor:v(({data:i,field:V})=>[a(C,{id:"basic",modelValue:i[V],"onUpdate:modelValue":E=>i[V]=E,mask:"99:99"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(k,{header:"Posti",field:"available_seats"},{editor:v(({data:i,field:V})=>[a(l,{modelValue:i[V],"onUpdate:modelValue":E=>i[V]=E,min:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(k,{rowEditor:!0,style:{width:"8rem"},bodyStyle:"text-align:right"}),a(k,{header:"",style:{width:"3rem","padding-left":"0"}},{body:v(({data:i,index:V})=>[s("div",xo,[P(a(f,{link:"",icon:"pi pi-trash",text:"",rounded:"",style:{color:"var(--surface-400)"},onClick:E=>o.deleteSlot(i,V)},null,8,["onClick"]),[[g,"Elimina",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","editingRows","onRowEditSave"])])]),s("div",Vo,[a(f,{label:"Annulla",text:"",onClick:e[17]||(e[17]=i=>t.$emit("onClose"))}),a(f,{label:"Conferma",type:"submit"})])]),_:1},8,["onSubmit","validation-schema"])}const To=K(Oe,[["render",Do]]),So={props:["location_id"],setup(t){H(()=>{c.value=!0,r.value={first:0,rows:n.value.rows,sortField:null,sortOrder:null},r.value.page=0,t.location_id&&i(t.location_id)});const e=G(),n=w(),o=w(),T=w(),D=w(),c=w(!0),r=w(),b=w(0),y=w(!1),f=w(),C=w(!1),k=de(),l=U(()=>k.responseConfigurations),h=me(),d=U(()=>h.submitDialog),g=U(()=>k.responseCourses),i=async function(u){const m=new Map;m.set("location_id",u),await k.getAllCourses(m).then(()=>{c.value=!1}).catch(S=>{c.value=!1,A(e,S)})},V=async function(u){if(!u)return;c.value=!0;const m=new Map;m.set("location_id",t.location_id),m.set("course_id",u),await k.fetchAllConfigurations(m).then(()=>{c.value=!1}).catch(S=>{c.value=!1,A(e,S)})},E=function(u){T.value=u;let m="Sei sicuro di voler eliminare questa configurazione?";h.setDialog("Elimina configurazione","Elimina","Annulla",m),h.setBtnSubmit(!1),h.setDynamicDialogVisibility(!0)},O=async function(){T.value&&await k.deleteConfiguration(T.value).then(()=>{c.value=!1,R(e,{message:"Configurazione eliminata correttamente",error:!1}),V(f.value)}).catch(u=>{c.value=!1,A(e,u)})},I=function(u,m){D.value=u,y.value=!0,C.value=m},M=function(u){return u.map(S=>Ce.local(2022,1,2+S).setLocale("it").toFormat("ccc")).join(", ")},x=function(u){V(u),y.value=!1},p=function(){return C.value?"Duplica configurazione":D.value&&D.value.id&&!C.value?"Modifica configurazione":"Nuova configurazione"};return L(d,u=>{d.value&&O()}),L(g,()=>{g.value.courses&&g.value.courses[0]&&(f.value=g.value.courses[0].id,V(f.value))}),L(t,()=>{t.location_id&&i(t.location_id)}),{dt:n,responseConfigurations:l,loading:c,totalRecords:b,lazyParams:r,op:o,visible:y,currentConfiguration:D,responseCourses:g,course_id:f,flag_duplicate:C,fromMMDDtoDDMM:ue,onDeleteConfiguration:O,confirmDelete:E,onEditConfiguration:I,fetchAllConfigurations:V,convertWdays:M,closeDialog:x,getHeader:p}},components:{ConfigurationDialog:To}},Eo={class:"flex justify-content-between mt-4 mb-3"},Ao={class:"field flex flex-column"},Bo=s("label",{for:"location"},"Percorso",-1),Uo={class:"capitalize"},Io={class:"flex justify-content-center"};function jo(t,e,n,o,T,D){const c=_("Dropdown"),r=_("Button"),b=_("Column"),y=_("DataTable"),f=_("ConfigurationDialog"),C=_("Dialog"),k=X("tooltip");return B(),z(q,null,[s("div",Eo,[s("div",Ao,[Bo,a(c,{modelValue:o.course_id,"onUpdate:modelValue":e[0]||(e[0]=l=>o.course_id=l),options:o.responseCourses.courses,optionLabel:"name",optionValue:"id",placeholder:"",name:"location",onChange:e[1]||(e[1]=l=>o.fetchAllConfigurations(o.course_id))},null,8,["modelValue","options"])]),a(r,{label:"Configurazione",icon:"pi pi-plus",rounded:"",outlined:"",onClick:e[2]||(e[2]=l=>o.onEditConfiguration({},!1))})]),a(y,{value:o.responseConfigurations.booking_rules,lazy:!0,paginator:!1,ref:"dt",loading:o.loading,stripedRows:""},{empty:v(()=>[F(" Nessuna configurazione trovata. ")]),default:v(()=>[a(b,{header:"Nome",field:"name"}),a(b,{header:"Dal Al"},{body:v(({data:l})=>[F(N(o.fromMMDDtoDDMM(l.from_date))+" - "+N(o.fromMMDDtoDDMM(l.to_date)),1)]),_:1}),a(b,{header:"Valida il",field:"week"},{body:v(({data:l})=>[s("div",Uo,N(o.convertWdays(l.wdays)),1)]),_:1}),a(b,{header:""},{body:v(({data:l})=>[s("div",Io,[P(a(r,{link:"",icon:"pi pi-copy",text:"",rounded:"",style:{color:"var(--surface-400)"},onClick:h=>o.onEditConfiguration(l,!0)},null,8,["onClick"]),[[k,"Duplica",void 0,{top:!0}]]),P(a(r,{link:"",icon:"pi pi-pencil",text:"",rounded:"",style:{color:"var(--surface-400)"},onClick:h=>o.onEditConfiguration(l,!1)},null,8,["onClick"]),[[k,"Modifica",void 0,{top:!0}]]),P(a(r,{link:"",icon:"pi pi-trash",text:"",rounded:"",style:{color:"var(--surface-400)"},onClick:h=>o.confirmDelete(l.id)},null,8,["onClick"]),[[k,"Elimina",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading"]),a(C,{visible:o.visible,"onUpdate:visible":e[5]||(e[5]=l=>o.visible=l),modal:"",header:o.getHeader(),style:{width:"70rem"}},{default:v(()=>[a(f,{config:o.currentConfiguration,onOnSubmit:e[3]||(e[3]=l=>o.closeDialog(l)),onOnClose:e[4]||(e[4]=l=>o.visible=!1),location_id:n.location_id,course_id:o.course_id,duplicate:o.flag_duplicate},null,8,["config","location_id","course_id","duplicate"])]),_:1},8,["visible","header"])],64)}const zo=K(So,[["render",jo]]);class Q{static async fetchAll(e){return e?(await W("/admin/booking_exception_rules",e)).data:{}}static async getCourses(e){return(await W("/admin/booking_exception_rules/courses",e)).data}static async getTickets(e){return(await W("/admin/booking_exception_rules/tickets",e)).data}static async addBookingException(e){return await se("/admin/booking_exception_rules",e)}static async updateBookingException(e){return await le(`/admin/booking_exception_rules/${e.booking_exception_rule.id}`,e)}static async deleteBookingException(e){return e==null?{}:await ce(`/admin/booking_exception_rules/${e}`)}}const he=re({id:"booking_exception",state:()=>({booking_exception:{},booking_exceptions:[],response_booking_exceptions:{},response_courses:{},response_tickets:{}}),getters:{allBookingExceptions:t=>t.booking_exceptions,responseBookingExceptions:t=>t.response_booking_exceptions,getTotalBookingExceptions:t=>t.response_booking_exceptions?t.response_booking_exceptions.total:0,getCurrentBookingException:t=>t.booking_exception,responseCourses:t=>t.response_courses,responseTickets:t=>t.response_tickets},actions:{async fetchAllBookingExceptions(t){await Q.fetchAll(t).then(e=>{this.response_booking_exceptions=e,this.booking_exceptions=e.booking_exceptions})},async getAllCourses(t){await Q.getCourses(t).then(e=>{this.response_courses=e})},async getAllTickets(t){await Q.getTickets(t).then(e=>{this.response_tickets=e})},async addBookingException(t){await Q.addBookingException(t).then()},async updateBookingException(t){await Q.updateBookingException(t).then()},async deleteBookingException(t){t!=null&&await Q.deleteBookingException(t).then()}}}),Mo={props:["config","location_id","course_id","duplicate"],setup(t,e){H(()=>{t.config&&t.config.id?(n.value=Object.assign({},t.config),n.value.date&&(n.value.date=Y(n.value.date)),t.duplicate&&delete n.value.id):(n.value.location_id=t.location_id,n.value.course_id=t.course_id,n.value.booking_exception_rule_slots=[]),M()});const n=w({}),o=w([]),T=_e({name:fe().required("Nome eccezione obbligatoria")}),{showLoader:D,hideLoader:c}=ee(),r=G(),b=ve(),y=w(!1),f=de(),C=he(),k=U(()=>b.allCategories),l=U(()=>f.responseTickets),h=U(()=>f.responseCourses),d=function(){D();const x=Object.assign({},n.value);x.date&&(x.date=ae(x.date)),x.booking_exception_rule_slots=[],n.value.booking_exception_rule_slots&&n.value.booking_exception_rule_slots.forEach(u=>{u.available_seats!=""&&u.start_at!=""&&x.booking_exception_rule_slots.push(u)});const p={booking_exception_rule:x};C.addBookingException(p).then(()=>{c(),R(r,{message:"Eccezione aggiunta correttamente",error:!1}),e.emit("onSubmit",n.value.course_id)}).catch(u=>{c(),A(r,u)})},g=function(){D();const x=Object.assign({},n.value);x.date&&(x.date=ae(x.date)),x.booking_exception_rule_slots=[],n.value.booking_exception_rule_slots&&n.value.booking_exception_rule_slots.forEach(u=>{u.available_seats!=""&&u.start_at!=""&&x.booking_exception_rule_slots.push(u)});const p={booking_exception_rule:x};C.updateBookingException(p).then(()=>{c(),R(r,{message:"Eccezione modificata correttamente",error:!1}),e.emit("onSubmit",n.value.course_id)}).catch(u=>{c(),A(r,u)})},i=function(){n.value.id?g():d()},V=function(){let x={};x.price=0,n.value.tickets.unshift(x),o.value.push(n.value.tickets[0])},E=function(x){let{newData:p,index:u}=x;n.value.booking_exception_rule_slots[u]=p;let S={start_at:"",available_seats:"",id:+n.value.booking_exception_rule_slots[n.value.booking_exception_rule_slots.length-1].id-1};n.value.booking_exception_rule_slots.push(S),o.value=[S]},O=function(){let x={start_at:"",available_seats:"",id:"-1"};n.value.booking_exception_rule_slots.push(x),o.value.push(x)},I=function(x,p){n.value.booking_exception_rule_slots.splice(p,1)},M=function(){const x=new Map;x.set("location_id",n.value.location_id),x.set("course_id",n.value.course_id),f.getAllTickets(x).catch(p=>{A(r,p)})};return L(k,()=>{n.value.category||(n.value.category=k.value[0])}),{form:n,schema:T,loading:y,editingRows:o,onSubmit:i,addTicket:V,onRowEditSave:E,deleteSlot:I,addSlot:O,fetchAllTickets:M,categories:k,responseTickets:l,responseCourses:h}},components:{Form:ge,InputTextWithValidation:pe}},Ro={class:"formgrid grid mt-3"},Lo={class:"field col-12"},No={class:"field flex flex-column col-6"},Oo=s("label",{for:"location"},"Percorso",-1),Fo={class:"field col-3"},Po=s("label",{from:"date"},"Il",-1),Wo=s("div",{class:"field col-3"},null,-1),qo={class:"field col-3 mt-3"},Ho=s("label",null,"Biglietti",-1),Go=["for"],Ko={class:"inline-block",style:{"min-width":"150px"}},Jo={class:"text-right"},Qo=s("div",{class:"col-9"},null,-1),Xo={class:"col-12 mt-4 field"},Yo=s("label",null,"Chiusura",-1),Zo={class:"flex align-items-center"},$o=s("label",{for:"is_closing",class:"ml-2"}," Giorno di chiusura ",-1),et={key:0,class:"field col-8 mt-3"},ot={class:"field flex justify-content-between align-items-end mt-4 mb-3"},tt=s("label",null,"Orari",-1),nt={class:"flex justify-content-center"},it={class:"flex align-items-center justify-content-end mt-6"};function at(t,e,n,o,T,D){const c=_("InputTextWithValidation"),r=_("Dropdown"),b=_("Calendar"),y=_("Checkbox"),f=_("Button"),C=_("InputMask"),k=_("Column"),l=_("InputNumber"),h=_("DataTable"),d=_("Form"),g=X("tooltip");return B(),Z(d,{onSubmit:o.onSubmit,"validation-schema":o.schema},{default:v(()=>[s("div",Ro,[s("div",Lo,[a(c,{name:"name",label:"Nome eccezione*",modelValue:o.form.name,"onUpdate:modelValue":e[0]||(e[0]=i=>o.form.name=i)},null,8,["modelValue"])]),s("div",No,[Oo,a(r,{modelValue:o.form.course_id,"onUpdate:modelValue":e[1]||(e[1]=i=>o.form.course_id=i),options:o.responseCourses.courses,optionLabel:"name",optionValue:"id",placeholder:"",name:"location",onChange:e[2]||(e[2]=i=>o.fetchAllTickets())},null,8,["modelValue","options"])]),s("div",Fo,[Po,a(b,{inputId:"date",modelValue:o.form.date,"onUpdate:modelValue":e[3]||(e[3]=i=>o.form.date=i),dateFormat:"dd/mm/yy",manualInput:!1,placeholder:""},null,8,["modelValue"])]),Wo,s("div",qo,[Ho,(B(!0),z(q,null,ie(o.responseTickets.tickets,i=>(B(),z("div",{key:i.id,class:"flex align-items-center mb-2"},[a(y,{modelValue:o.form.booking_exception_rule_ticket_ids,"onUpdate:modelValue":e[4]||(e[4]=V=>o.form.booking_exception_rule_ticket_ids=V),inputId:i.id+"",name:"category",value:i.id},null,8,["modelValue","inputId","value"]),s("label",{for:i.id+"",class:"ml-2 flex align-items-center"},[s("div",Ko,N(i.name),1),s("div",Jo,"€ "+N(i.price),1)],8,Go)]))),128))]),Qo,s("div",Xo,[Yo,s("div",Zo,[a(y,{modelValue:o.form.is_closing,"onUpdate:modelValue":e[5]||(e[5]=i=>o.form.is_closing=i),inputId:"is_closing",binary:!0},null,8,["modelValue"]),$o])]),o.form.is_closing?$("",!0):(B(),z("div",et,[s("div",ot,[tt,a(f,{label:"Slot orario",icon:"pi pi-plus",rounded:"",outlined:"",onClick:e[6]||(e[6]=i=>o.addSlot())})]),a(h,{value:o.form.booking_exception_rule_slots,ref:"dt",loading:o.loading,stripedRows:"",editingRows:o.editingRows,"onUpdate:editingRows":e[7]||(e[7]=i=>o.editingRows=i),editMode:"row",dataKey:"id",onRowEditSave:o.onRowEditSave},{empty:v(()=>[F(" Nessuno slot orario trovato. ")]),default:v(()=>[a(k,{header:"Ora",field:"start_at"},{editor:v(({data:i,field:V})=>[a(C,{id:"basic",modelValue:i[V],"onUpdate:modelValue":E=>i[V]=E,mask:"99:99"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(k,{header:"Posti",field:"available_seats"},{editor:v(({data:i,field:V})=>[a(l,{modelValue:i[V],"onUpdate:modelValue":E=>i[V]=E,min:0},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(k,{rowEditor:!0,style:{width:"8rem"},bodyStyle:"text-align:right"}),a(k,{header:"",style:{width:"3rem","padding-left":"0"}},{body:v(({data:i,index:V})=>[s("div",nt,[P(a(f,{link:"",icon:"pi pi-trash",text:"",rounded:"",style:{color:"var(--surface-400)"},onClick:E=>o.deleteSlot(i,V)},null,8,["onClick"]),[[g,"Elimina",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading","editingRows","onRowEditSave"])]))]),s("div",it,[a(f,{label:"Annulla",text:""}),a(f,{label:"Conferma",type:"submit"})])]),_:1},8,["onSubmit","validation-schema"])}const st=K(Mo,[["render",at]]),lt={props:["location_id"],setup(t){H(()=>{c.value=!0,r.value={first:0,rows:n.value.rows,sortField:null,sortOrder:null},r.value.page=0,t.location_id&&V(t.location_id)});const e=G(),n=w(),o=w(),T=w(),D=w(),c=w(!0),r=w(),b=w(0),y=w(!1);w([]);const f=w(),C=w(!1),k=de(),l=he(),h=U(()=>l.responseBookingExceptions),d=me(),g=U(()=>d.submitDialog),i=U(()=>k.responseCourses),V=async function(u){const m=new Map;m.set("location_id",u),await k.getAllCourses(m).then(()=>{c.value=!1}).catch(S=>{c.value=!1,A(e,S)})},E=async function(u){if(!u)return;c.value=!0;const m=new Map;m.set("location_id",t.location_id),m.set("course_id",u),await l.fetchAllBookingExceptions(m).then(()=>{c.value=!1}).catch(S=>{c.value=!1,A(e,S)})},O=function(u){T.value=u;let m="Sei sicuro di voler eliminare questa eccezione?";d.setDialog("Elimina eccezione","Elimina","Annulla",m),d.setBtnSubmit(!1),d.setDynamicDialogVisibility(!0)},I=async function(){T.value&&await l.deleteBookingException(T.value).then(()=>{c.value=!1,R(e,{message:"Eccezione eliminata correttamente",error:!1}),E(f.value)}).catch(u=>{c.value=!1,A(e,u)})},M=function(u,m){D.value=u,y.value=!0,C.value=m},x=function(u){E(u),y.value=!1},p=function(){return C.value?"Duplica eccezione":D.value&&D.value.id&&!C.value?"Modifica eccezione":"Nuova eccezione"};return L(g,u=>{u&&I()}),L(i,()=>{i.value&&i.value.courses&&i.value.courses.length>0&&(f.value=i.value.courses[0].id,E(f.value))}),L(t,()=>{t.location_id&&V(t.location_id)}),{dt:n,responseBookingExceptions:h,loading:c,totalRecords:b,lazyParams:r,op:o,visible:y,currentConfiguration:D,responseCourses:i,course_id:f,flag_duplicate:C,onDeleteConfigurationException:I,confirmDelete:O,onEditConfiguration:M,getHeader:p,closeDialog:x,fetchAllBookingExceptions:E,formatPrettyDate:Y}},components:{BookingExceptionDialog:st}},ct={class:"flex justify-content-between mt-4 mb-3"},rt={class:"field flex flex-column"},dt=s("label",{for:"location"},"Percorso",-1),ut={class:"flex justify-content-center"};function mt(t,e,n,o,T,D){const c=_("Dropdown"),r=_("Button"),b=_("Column"),y=_("DataTable"),f=_("BookingExceptionDialog"),C=_("Dialog"),k=X("tooltip");return B(),z(q,null,[s("div",ct,[s("div",rt,[dt,a(c,{modelValue:o.course_id,"onUpdate:modelValue":e[0]||(e[0]=l=>o.course_id=l),options:o.responseCourses.courses,optionLabel:"name",optionValue:"id",placeholder:"",name:"location",onChange:e[1]||(e[1]=l=>o.fetchAllBookingExceptions(o.course_id))},null,8,["modelValue","options"])]),a(r,{label:"Eccezione",icon:"pi pi-plus",rounded:"",outlined:"",onClick:e[2]||(e[2]=l=>o.onEditConfiguration({},!1))})]),a(y,{value:o.responseBookingExceptions.booking_exception_rules,lazy:!0,paginator:!1,ref:"dt",loading:o.loading,stripedRows:""},{empty:v(()=>[F(" Nessuna eccezione trovata. ")]),default:v(()=>[a(b,{header:"Nome",field:"name"}),a(b,{header:"Il"},{body:v(({data:l})=>[F(N(o.formatPrettyDate(l.date)),1)]),_:1}),a(b,{header:""},{body:v(({data:l})=>[s("div",ut,[P(a(r,{link:"",icon:"pi pi-copy",text:"",rounded:"",style:{color:"var(--surface-400)"},onClick:h=>o.onEditConfiguration(l,!0)},null,8,["onClick"]),[[k,"Duplica",void 0,{top:!0}]]),P(a(r,{link:"",icon:"pi pi-pencil",text:"",rounded:"",style:{color:"var(--surface-400)"},onClick:h=>o.onEditConfiguration(l,!1)},null,8,["onClick"]),[[k,"Modifica",void 0,{top:!0}]]),P(a(r,{link:"",icon:"pi pi-trash",text:"",rounded:"",style:{color:"var(--surface-400)"},onClick:h=>o.confirmDelete(l.id)},null,8,["onClick"]),[[k,"Elimina",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","loading"]),a(C,{visible:o.visible,"onUpdate:visible":e[4]||(e[4]=l=>o.visible=l),modal:"",header:o.getHeader(),style:{width:"70rem"}},{default:v(()=>[a(f,{config:o.currentConfiguration,onOnSubmit:e[3]||(e[3]=l=>o.closeDialog(l)),location_id:n.location_id,course_id:o.course_id,duplicate:o.flag_duplicate},null,8,["config","location_id","course_id","duplicate"])]),_:1},8,["visible","header"])],64)}const _t=K(lt,[["render",mt]]),ft={setup(){H(()=>{C()});const t=w({}),e=ye(),n=w(),o=w(),T=w(),{showLoader:D,hideLoader:c}=ee(),r=G(),b=w(!1),y=U(()=>e.allLocations),f=U(()=>e.getCurrentLocation),C=async function(){await e.fetchAllLocations().then(()=>{f.value&&(t.value.location=f.value,l())})},k=function(){e.updateCurrenLocation(t.value.location),l()},l=function(){o.value=Y(t.value.location.calendar_visible_from),T.value=Y(t.value.location.calendar_visible_to)},h=async function(){D();let d={calendar_visible_from:ae(o.value),calendar_visible_to:ae(T.value),location_id:t.value.location.id};await e.updateLocation(d).then(()=>{c(),R(r,{message:"Data aggiornata correttamente",error:!1}),o.value=be(o.value),T.value=be(T.value),b.value=!1}).catch(g=>{c(),A(r,g)})};return L(y,()=>{t.value.location_id=y.value[0].id}),{form:t,courseTable:n,calendar_visible_from:o,calendar_visible_to:T,active:b,locations:y,onChangeLocation:k,updateVisibility:h,formatPrettyDate:Y}},components:{CourseTable:Ne,OpeningsTable:zo,BookingExceptionTable:_t}};const gt=s("h1",null,"Configurazioni",-1),pt={class:"flex align-items-center justify-content-between"},vt={class:"field col-3 flex flex-column"},bt=s("label",{for:"location"},"Location",-1),kt={class:"col-9 flex justify-content-end"},ht={key:0,class:"col-12 field"},yt=s("label",{class:"ml-1"},"Finestra di visibilità",-1),Ct={class:"flex align-items-center mt-2 ml-0 pl-0 gap-5"};function wt(t,e,n,o,T,D){var d;const c=_("Dropdown"),r=_("Calendar"),b=_("Inplace"),y=_("Card"),f=_("CourseTable"),C=_("TabPanel"),k=_("OpeningsTable"),l=_("BookingExceptionTable"),h=_("TabView");return B(),z("div",null,[gt,s("div",pt,[s("div",vt,[bt,a(c,{modelValue:o.form.location,"onUpdate:modelValue":e[0]||(e[0]=g=>o.form.location=g),options:o.locations,optionLabel:"name",placeholder:"",name:"location",onChange:e[1]||(e[1]=g=>o.onChangeLocation())},null,8,["modelValue","options"])]),s("div",kt,[a(y,{style:{width:"30rem"}},{content:v(()=>[o.form.location?(B(),z("div",ht,[yt,s("div",Ct,[a(b,{closable:!0,onClose:e[3]||(e[3]=g=>o.updateVisibility()),active:o.active},{display:v(()=>[F(" Dal: "+N(o.calendar_visible_from),1)]),content:v(()=>[a(r,{inputId:"date",modelValue:o.calendar_visible_from,"onUpdate:modelValue":e[2]||(e[2]=g=>o.calendar_visible_from=g),dateFormat:"dd/mm/yy",manualInput:!0,autofocus:""},null,8,["modelValue"])]),_:1},8,["active"]),a(b,{closable:!0,onClose:e[5]||(e[5]=g=>o.updateVisibility()),active:o.active},{display:v(()=>[F(" Al: "+N(o.calendar_visible_to),1)]),content:v(()=>[a(r,{inputId:"date",modelValue:o.calendar_visible_to,"onUpdate:modelValue":e[4]||(e[4]=g=>o.calendar_visible_to=g),dateFormat:"dd/mm/yy",manualInput:!0,autofocus:""},null,8,["modelValue"])]),_:1},8,["active"])])])):$("",!0)]),_:1})])]),(d=o.form.location)!=null&&d.id?(B(),Z(h,{key:0},{default:v(()=>[a(C,{header:"Percorsi"},{default:v(()=>{var g;return[a(f,{location_id:(g=o.form.location)==null?void 0:g.id,ref:"courseTable"},null,8,["location_id"])]}),_:1}),a(C,{header:"Aperture"},{default:v(()=>[a(k,{location_id:o.form.location.id},null,8,["location_id"])]),_:1}),a(C,{header:"Eccezioni"},{default:v(()=>[a(l,{location_id:o.form.location.id},null,8,["location_id"])]),_:1})]),_:1})):$("",!0)])}const Mt=K(ft,[["render",wt]]);export{Mt as default};
